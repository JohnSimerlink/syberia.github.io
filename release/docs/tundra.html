<html>

  <head>
    <script src="https://use.typekit.net/xdj4hmw.js"></script>
    <script type="text/javascript">try { Typekit.load({ async: true }); } catch(e) { }</script>

    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,500" rel="stylesheet" type="text/css">
    <link rel="stylesheet" media="all" href="../style.css" type="text/css" />
    <link rel="stylesheet" media="all" href="../stylesheets/rocco.css" />
    <link rel="stylesheet" media="all" href="../stylesheets/github-markdown.css" />

    <script src="../assets/highlight.pack.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
  </head>

  <body>
  <div class="backdrop tk-proxima-nova">
    <div class="header">
      <div class="header-left">Syberia</div>
      <div class="header-right">
        <ul>
          <li><a href="#">Get Started</a></li>
          <li><a href="#">Docs</a></li>
        </ul>
      </div>
    </div>
    <br /> <br /> <br />
  </div>
  <div class="colmask leftmenu tk-proxima-nova">
    <div class="colleft">
      <div class="col1">
<h1>Model objects</h1>

<p>After your model is trained, you want to be able to make use of it later for
validation or production scoring. In some situations, like when your end goal
is to produce a static report, this may not be necessary, but even in these
cases it may be useful to reproduce the scores later.</p>

<p>A <b>model object</b> is an R object that is able to reproduce the scores
generating during training on the same messy, production data that was used
to train the model. Typically, R model objects like <code class="inline">lm</code>
or <code class="inline">gbm</code> objects are insufficient for reproducing
scores in a live scoring environment: you will have to "productionize" your
feature engineering pipeline as well after the data scientists have prototyped it.</p>

<p>In the Syberia modeling engine, feature engineering is a critical production-ready
aspect of the process that does not require any additional code: the code you ran
in mungebits and the parameters that were selected during training
(for example, the columns that were dropped after detecting for correlations, the
means of features to use during imputation, etc.) are stored on the model object.</p>

<p>This allows us to faithfully replicate the end-to-end data science process
that produced the model on single rows that come through in a production system.
Alternatively, we can use the model object to generate validation scores on new
samples from the original distribution, e.g., when new customers arrive or when
we get additional data.</p>

<h2>The tundra container</h2>

<p>The default model object container that ships with the modeling engine is
a <b>tundra container</b> (tundra because it freezes your model for production use,
and tundra is in Syberia... get it?).</p>

<p>A tundra container is an R6 object that consists of a <b>munge procedure</b>,
a <b>train function</b>, a <b>predict function</b> and saved <b>inputs saved during training</b>.
The munge procedure is copied directly from the data stage.</p>

<div class="code">
  <pre>
    <code class="R"><span class="spacer">
# Place this code in models/dev/example3.R
list(
  import = list(R = "iris"),
  data   = list(
    "Create a dependent variable" = list(renamer ~ NULL, c("Sepal.Length" = "dep_var")),
    "Create a primary key variable" = list(multi_column_transformation(seq_along) ~ NULL, "dep_var", "id"),
    "Drop categorical features"   = list(drop_variables, is.factor)
  ),
  model  = list("lm", .id_var = "id"),
  export = list(R = "model") 
)
    </code>
  </pre>
</div>

<p>Now let's execute the model.</p>

<div class="code">
  <pre>
    <code class="R"><span class="spacer">
run("example3")
model$munge_procedure
model$predict_fn
    </code>
  </pre>
</div>

<p>You should see some colorful output!</p>

<p><img src="../../images/tundra-example2.png" title="Example of tundra container munge procedure" style="border-radius: 30px; border: 30px solid #000; padding: 0;" width="600" /></p>

<h2>Next Steps</h2>

<ul>
  <li><a href="director.html">Controllers</a></li>
  <li><a href="testing.html">Testing</a></li>
  <li><a href="summary.html">Summary and review</a></li>
</ul>

<code class="inline"></code>
        </div>
        <div class="col2">
          <br /> <br /> <br />
          SIDEBAR TEXT!
        </div>
      </div>
    </div>
  </div>
</body>
